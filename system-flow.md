# فلو و معماری داشبورد کشف و مدیریت ماینر

## ۱. Backend (FastAPI یا Node.js/Express)

- اجرای ماژول‌های اسکن شبکه (Nmap/Scapy)، RF (RTLSDR)، BLE، WiFi، SNMP و ... (ماژولار)
- ذخیره نتایج در دیتابیس (PostgreSQL/SQLite/Redis)
- پیاده‌سازی منطق هوشمند (AI / Rule-based) برای آنالیز و پیش‌بینی
- API REST/GraphQL برای دریافت داده و کنترل اسکن‌ها
- WebSocket برای ارسال رویداد/هشدار real-time به کلاینت
- خروجی JSON، CSV، Excel و گزارش تصویری HTML
- اتصال به سرویس‌های هشدار (ایمیل، تلگرام، SMS) با ماژول‌های قابل اضافه‌شدن

## ۲. Frontend (React/Next.js با React-Leaflet و Chart.js)

- نمایش لیست و جدول و آیکون دستگاه‌های کشف‌شده (real-time)
- نقشه Leaflet با مارکر و popup اطلاعات (موقعیت، پورت، امتیاز مشکوک...)
- داشبورد نموداری (Pie, Bar, Line Chart) برای‌ آماره‌ها
- فیلتر پیشرفته (بر حسب استان، شهر، درجه ریسک، نوع کشف و ...)
- گزارش تصویری و امکان دانلود گزارش (Excel, CSV, JSON)
- فرم تنظیم Rule و AI (امتیازدهی، تعریف Rule جدید، فعال‌سازی الگوریتم ML)
- نمایش نوتیفیکیشن و وضعیت بلادرنگ (WebSocket)
- صفحه مدیریت کاربران و لاگ سیستم (در صورت نیاز)

## ۳. ترکیب ماژول‌ها

- هر ماژول (اسکن شبکه، BLE، RF، SNMP و...) یک worker/service مستقل است که نتیجه را realtime به backend و سپس به frontend ارسال می‌کند
- داشبورد کلاینت می‌تواند اسکن جدید را شروع/متوقف کند و خروجی هر ماژول را ببیند
- الگوریتم Rule Engine و AI (قابل ویرایش و تعریف توسط مدیر) روی داده‌ها اجرا می‌شود و نتیجه (مثلاً امتیاز ریسک، هشدار فوری و ...) برای هر آیتم ذخیره می‌گردد

## ۴. گزارش و خروجی

- کل نتایج و جستجوها به انتخاب کاربر به فرمت Excel، CSV، JSON و HTML قابل دانلود است
- بخش export و import تنظیمات و ruleها برای مهاجرت یا نسخه‌بکاپ
- گزارش تصویری (با نقشه و نمودار) برای ارائه یا مستندسازی
- فیلد یادداشت و پیوست برای هر آیتم (مثلاً درج عکس محل دستگاه یا لاگ فنی)

## ۵. نوتیفیکیشن

- تنظیم سطح هشدار به ازای Rule یا ریسک
- ارسال Email, Telegram, SMS, Webhook و ...
- نمایش نوتیفیکیشن داخلی در وب‌اپ

## ۶. API

- REST/GraphQL برای مصرف داده و کنترل اسکن
- Webhook برای اعلان‌ به سامانه‌های دیگر
- قابلیت اتصال به API دستگاه‌های برق یا شهرک صنعتی یا ...

## ۷. امنیت

- ورود با نام کاربری و رمز یا SSO
- سطح دسترسی و لاگ رویدادها
- hardening بر اساس نیاز شما
